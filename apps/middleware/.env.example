# Porta onde o servico vai ouvir
PORT=4000

# Ambiente
NODE_ENV=production

# Identidade do servico (opcional)
SERVICE_NAME=termoflow-graphql-middleware
# APP_VERSION=1.0.0

# Se estiver atras de proxy/reverse-proxy (para IP real no rate limit)
# TRUST_PROXY=true

# Limite do body JSON
REQUEST_BODY_LIMIT=1mb

# CORS (por padrao: liberado em dev, bloqueado em prod)
# CORS_ORIGINS=http://localhost:3000,https://seu-dominio.com

# Protecao opcional do gateway (nao confundir com Authorization do usuario)
# Use o header `x-api-key: <API_KEY>` ou `Authorization: ApiKey <API_KEY>`
# API_KEY=troque-este-valor

# Rate limit (aplicado ao /graphql)
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX=120

# GraphQL hardening
MAX_OPERATIONS=1
MAX_QUERY_DEPTH=10
# MAX_QUERY_FIELDS=200
# MAX_QUERY_LENGTH=10000
# ENABLE_INTROSPECTION=true

# Timeouts do servidor HTTP (protege contra conexoes lentas)
# SERVER_KEEP_ALIVE_TIMEOUT_MS=5000
# SERVER_HEADERS_TIMEOUT_MS=10000
# SERVER_REQUEST_TIMEOUT_MS=30000

# Base URL do servico REST que sera consumido pelos resolvers (opcional)
# UPSTREAM_BASE_URL=http://host.docker.internal:8080
# UPSTREAM_HEALTH_PATH=/health

# Restricao de paths permitidos para o upstream (opcional, separado por virgula)
# UPSTREAM_ALLOWED_PATH_PREFIXES=/api,/v1

# Limite maximo de bytes lidos do upstream (protege contra respostas gigantes)
# UPSTREAM_MAX_RESPONSE_BYTES=2000000

# Timeout (ms) para chamadas ao upstream
UPSTREAM_TIMEOUT_MS=10000

# Banco (PostgreSQL + Prisma)
# Para rodar via Docker Compose, o host costuma ser o nome do servico (ex: `postgres`).
# Para rodar local (sem Docker), use `localhost`.
POSTGRES_USER=termoflow
POSTGRES_PASSWORD=termoflow
POSTGRES_DB=termoflow
DATABASE_URL=postgresql://termoflow:termoflow@postgres:5432/termoflow?schema=public
